# Theme Toggle Component

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã (—Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è) —Å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–π SVG-–∏–∫–æ–Ω–∫–æ–π —Å–æ–ª–Ω—ã—à–∫–æ/–ª—É–Ω–∞.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üåì **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º**: –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Å–≤–µ—Ç–ª–æ–π –∏ —Ç—ë–º–Ω–æ–π —Ç–µ–º–æ–π
- üíæ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –≤ localStorage
- ‚ú® **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∏–º–∞—Ü–∏—è**: –≠–ª–µ–≥–∞–Ω—Ç–Ω–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–æ–ª–Ω—Ü–∞ –≤ –ª—É–Ω—É —Å elastic —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
- üéØ **SVG –º–æ—Ä—Ñ–∏–Ω–≥**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SVG mask –¥–ª—è –ø–ª–∞–≤–Ω–æ–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
- ‚ôø **Accessibility**: ARIA-–º–µ—Ç–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `prefers-reduced-motion`
- üì± **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–∞
- ‚ö° **SSR-friendly**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ hydration mismatch

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```tsx
import ThemeToggle from '@/components/common/theme-toggle';

function Header() {
  return (
    <header>
      <ThemeToggle />
    </header>
  );
}
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ThemeContext

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–≤—è–∑–∫–µ —Å `ThemeContext`:

```tsx
// –í root layout
import { ThemeProvider } from '@/contexts/ThemeContext';

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        <ThemeProvider defaultTheme='light'>{children}</ThemeProvider>
      </body>
    </html>
  );
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—É–∫–∞ useTheme

–í –ª—é–±–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ç–µ–º–µ:

```tsx
import { useTheme } from '@/contexts/ThemeContext';

function MyComponent() {
  const { theme, toggleTheme, setTheme } = useTheme();

  return (
    <div>
      <p>–¢–µ–∫—É—â–∞—è —Ç–µ–º–∞: {theme}</p>
      <button onClick={toggleTheme}>–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É</button>
      <button onClick={() => setTheme('dark')}>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç—ë–º–Ω—É—é</button>
    </div>
  );
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
theme-toggle/
‚îú‚îÄ‚îÄ ThemeToggle.tsx      # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è
‚îú‚îÄ‚îÄ ThemeToggle.scss     # –°—Ç–∏–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ SunMoonIcon.tsx      # –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è SVG –∏–∫–æ–Ω–∫–∞
‚îú‚îÄ‚îÄ SunMoonIcon.scss     # –°—Ç–∏–ª–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏–∫–æ–Ω–∫–∏
‚îú‚îÄ‚îÄ index.ts             # –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îî‚îÄ‚îÄ README.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### ThemeToggle

–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç-–∫–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã.

### SunMoonIcon

–ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è SVG –∏–∫–æ–Ω–∫–∞ —Å –º–æ—Ä—Ñ–∏–Ω–≥–æ–º –º–µ–∂–¥—É —Å–æ–ª–Ω—Ü–µ–º –∏ –ª—É–Ω–æ–π. –û—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞
[GUI Challenges –æ—Ç Adam Argyle](https://github.com/argyleink/gui-challenges/tree/main/theme-switch).

**Props:**

- `theme`: `'light' | 'dark'` - —Ç–µ–∫—É—â–∞—è —Ç–µ–º–∞
- `size`: `number` - —Ä–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ –≤ –ø–∏–∫—Å–µ–ª—è—Ö (default: 20)
- `className`: `string` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π CSS –∫–ª–∞—Å—Å
- `disableAnimations`: `boolean` - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```tsx
import { SunMoonIcon } from '@/components/common/theme-toggle';

<SunMoonIcon theme='dark' size={24} />;
```

## –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ç–µ–º:

- `--color-text` - —Ü–≤–µ—Ç –∏–∫–æ–Ω–∫–∏
- `--color-primary` - —Ü–≤–µ—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
- `--color-surface-hover` - —Ñ–æ–Ω –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
- `--color-focus` - —Ü–≤–µ—Ç –æ–±–≤–æ–¥–∫–∏ —Ñ–æ–∫—É—Å–∞

## –ê–Ω–∏–º–∞—Ü–∏–∏

–ò–∫–æ–Ω–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ cubic-bezier —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–ª–∞–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤:

### –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ ‚Üí –¢—ë–º–Ω–∞—è

- **–°–æ–ª–Ω—Ü–µ ‚Üí –õ—É–Ω–∞**: –°–æ–ª–Ω—Ü–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è (scale 1.75), –º–∞—Å–∫–∞ —Å–º–µ—â–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—è —ç—Ñ—Ñ–µ–∫—Ç –ª—É–Ω–Ω–æ–≥–æ —Å–µ—Ä–ø–∞
- **–õ—É—á–∏**: –ò—Å—á–µ–∑–∞—é—Ç —Å –ø–æ–≤–æ—Ä–æ—Ç–æ–º –Ω–∞ -25¬∞ –∏ fade out
- **Timing**: Elastic easing –¥–ª—è —Å–æ–ª–Ω—Ü–∞, ease-out –¥–ª—è –º–∞—Å–∫–∏

### –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ ‚Üí –°–≤–µ—Ç–ª–∞—è

- **–õ—É–Ω–∞ ‚Üí –°–æ–ª–Ω—Ü–µ**: –°–æ–ª–Ω—Ü–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É
- **–õ—É—á–∏**: –ü–æ—è–≤–ª—è—é—Ç—Å—è —Å elastic —ç—Ñ—Ñ–µ–∫—Ç–æ–º
- **Timing**: –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã (0.25s –≤–º–µ—Å—Ç–æ 0.5s)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

- **Hover**: –õ–µ–≥–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (1.05) + —Å–º–µ–Ω–∞ —Ü–≤–µ—Ç–∞ –Ω–∞ primary
- **Active**: –ù–∞–∂–∞—Ç–∏–µ (scale 0.95)
- **prefers-reduced-motion**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ–º

## –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

–í—ã–±–æ—Ä —Ç–µ–º—ã —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `localStorage` —Å –∫–ª—é—á–æ–º `'theme'`:

- –ó–Ω–∞—á–µ–Ω–∏–µ: `'light'` –∏–ª–∏ `'dark'`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `'light'`

## Accessibility

- `aria-label`: –û–ø–∏—Å–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è screen readers
- `aria-pressed`: –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ (true –¥–ª—è —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã)
- `aria-hidden`: –°–∫—Ä—ã—Ç–∏–µ –∑–∞–≥–ª—É—à–∫–∏ –æ—Ç screen readers
- `title`: –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
- `focus-visible`: –í–∏–¥–∏–º–∞—è —Ä–∞–º–∫–∞ —Ñ–æ–∫—É—Å–∞ –¥–ª—è keyboard navigation
- `prefers-reduced-motion`: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π
- `type="button"`: –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ —Ç–∏–ø–∞ –∫–Ω–æ–ø–∫–∏

## SSR –∏ –≥–∏–¥—Ä–∞—Ü–∏—è

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `useState` –∏ `useEffect` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è hydration mismatch:

```tsx
const [isMounted, setIsMounted] = useState(false);

useEffect(() => {
  setIsMounted(true);
}, []);

// –ó–∞–≥–ª—É—à–∫–∞ –≤–æ –≤—Ä–µ–º—è SSR
if (!isMounted) {
  return <div className='theme-toggle theme-toggle--loading' aria-hidden='true' />;
}
```

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É –≤ Next.js —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º.

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### SVG mask technique

–ò–∫–æ–Ω–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SVG `<mask>` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –ª—É–Ω–Ω–æ–≥–æ —Å–µ—Ä–ø–∞:

- –í —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º–µ –º–∞—Å–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –∫—Ä—É–≥–∞ ‚Üí –ø–æ–ª–Ω–æ–µ —Å–æ–ª–Ω—Ü–µ
- –í —Ç—ë–º–Ω–æ–π —Ç–µ–º–µ –º–∞—Å–∫–∞ —Å–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ –∫—Ä—É–≥ ‚Üí –ª—É–Ω–Ω—ã–π —Å–µ—Ä–ø
- –ü–ª–∞–≤–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –º–∞—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –º–æ—Ä—Ñ–∏–Ω–≥-—ç—Ñ—Ñ–µ–∫—Ç

### –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ ID –º–∞—Å–æ–∫

–î–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–∫–æ–Ω–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:

```tsx
const maskId = React.useMemo(() => `moon-mask-${Math.random().toString(36).substr(2, 9)}`, []);
```
